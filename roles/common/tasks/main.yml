- name: Create necessary system groups
  group:
    name: "{{ item.name }}"
  with_items:
    - "{{ os_groups }}"

- name: Create necessary system users
  user:
    name: "{{ item.name }}"
  with_items:
    - "{{ os_users }}"

- name: Install Python and pip
  package:
    name: "{{ item }}"
    state: present
  become: true
  loop:
    - python3
    - python3-pip
    - python3-psycopg2
    - virtualenv
    - libpq-dev

- name: Ensure directory /etc/sysconfig exists
  file:
    path: /etc/sysconfig
    state: directory

- name: Ensure the locale exists
  locale_gen:
    name: C.UTF-8
    state: present

- name: set as default locale
  command: localectl set-locale LANG=C.UTF-8 LC_ALL=C.UTF-8